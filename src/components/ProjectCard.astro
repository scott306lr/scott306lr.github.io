---
import type { CollectionEntry } from 'astro:content';
import { formatYmd } from '../lib/dates';

type Props = {
	project: CollectionEntry<'projects'>;
	compact?: boolean;
	filterText?: string;
};

const { project, compact = false, filterText } = Astro.props;
---

<a
	href={`/projects/${project.slug}`}
	class:list={[
		'rounded-lg border bg-card p-4 no-underline transition hover:bg-accent',
		compact ? 'p-3' : null,
	]}
	{...(filterText ? { 'data-filter-text': filterText } : {})}
>
	<div class="flex items-baseline justify-between gap-4">
		<span class="font-medium text-card-foreground">{project.data.title}</span>
		<span class="text-xs text-muted-foreground">{formatYmd(project.data.date)}</span>
	</div>
	{project.data.summary ? <p class="mt-2 text-sm text-muted-foreground">{project.data.summary}</p> : null}
	{project.data.tags?.length ? (
		<div class="mt-3 flex flex-wrap gap-1.5">
			{project.data.tags.map((t) => (
				<span class="rounded-full border border-border bg-muted px-2 py-0.5 text-xs text-muted-foreground">{t}</span>
			))}
		</div>
	) : null}
</a>
