---
import BaseLayout from './BaseLayout.astro';
import { formatYmd } from '../lib/dates';

type Props = {
	title: string;
	description?: string;
	date: Date;
	lastUpdated?: Date | null;
	tags?: { label: string; slug: string }[];
};

const { title, description, date, lastUpdated, tags = [] } = Astro.props;
---

<BaseLayout title={title} description={description}>
	<article class="prose prose-zinc max-w-none dark:prose-invert">
		<header class="not-prose mb-8">
			<h1 class="mb-2 text-3xl font-bold tracking-tight text-zinc-900 dark:text-zinc-100">{title}</h1>
			{description ? <p class="mb-3 text-zinc-600 dark:text-zinc-300">{description}</p> : null}
			<div class="flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-zinc-500 dark:text-zinc-400">
				<span>Published {formatYmd(date)}</span>
				{lastUpdated ? <span>Updated {formatYmd(lastUpdated)}</span> : null}
			</div>
			{tags.length ? (
				<div class="mt-4 flex flex-wrap gap-2">
					{tags.map((t) => (
						<a
							href={`/tags/${t.slug}`}
							class="rounded-md border border-zinc-200 px-2 py-1 text-xs no-underline hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900"
						>
							{t.label}
						</a>
					))}
				</div>
			) : null}
		</header>
		<slot />
	</article>
</BaseLayout>
