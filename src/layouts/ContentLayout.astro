---
import BaseLayout from './BaseLayout.astro';
import { formatYmd } from '../lib/dates';

type Props = {
	title: string;
	description?: string;
	date: Date;
	lastUpdated?: Date | null;
	tags?: { label: string; slug: string }[];
};

const { title, description, date, lastUpdated, tags = [] } = Astro.props;
---

<BaseLayout title={title} description={description}>
	<header class="border-b border-border pb-6">
		<h1 class="text-3xl font-bold tracking-tight text-foreground">{title}</h1>
		{description ? <p class="mt-2 text-muted-foreground">{description}</p> : null}
		<div class="mt-3 flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-muted-foreground">
			<span>Published {formatYmd(date)}</span>
			{lastUpdated ? <span>Updated {formatYmd(lastUpdated)}</span> : null}
		</div>
		{tags.length ? (
			<div class="mt-3 flex flex-wrap items-center gap-2">
				<span class="text-xs font-medium text-muted-foreground">Tags</span>
				{tags.map((t) => (
					<a
						href={`/tags/${t.slug}`}
						class="inline-flex items-center rounded-full border border-border bg-muted px-2.5 py-1 text-xs font-medium text-muted-foreground no-underline transition-colors hover:bg-accent hover:text-accent-foreground"
					>
						{t.label}
					</a>
				))}
			</div>
		) : null}
	</header>

	<article class="prose prose-zinc mt-6 max-w-none dark:prose-invert prose-headings:scroll-mt-24">

		<slot />
	</article>
</BaseLayout>
