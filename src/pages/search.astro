---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="Search" description="Search posts and works.">
	<h1 class="text-2xl font-bold tracking-tight">Search</h1>
	<p class="mt-2 text-zinc-600 dark:text-zinc-300">Type to search across posts and works.</p>

	<div id="search" class="mt-6"></div>

	<script is:inline>
		// Pagefind UI (generated at build time into /pagefind)
		// eslint-disable-next-line no-undef
		window.addEventListener('DOMContentLoaded', async () => {
			const root = document.getElementById('search');
			if (!root) return;

			const css = document.createElement('link');
			css.rel = 'stylesheet';
			css.href = '/pagefind/pagefind-ui.css';
			document.head.appendChild(css);

			const script = document.createElement('script');
			script.src = '/pagefind/pagefind-ui.js';
			script.onload = () => {
				// @ts-ignore
				new PagefindUI({
					element: '#search',
					showSubResults: true,
					processResult: (result) => result,
				});
			};
			document.head.appendChild(script);
		});
	</script>
</BaseLayout>
